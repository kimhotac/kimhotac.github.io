# 05 루프와 관계 표현식

---

### 05.1 for 루프

반복작업을 쉽게 처리할 수 있다.

루프는 3가지 부분으로 나눌 수 있다.

- 루프 초기화(loop initialization)
- 루프 몸체(loop body)
- 루프 갱신(loop update)

for 루프의 각 부분

for 루프를 구성하는 각 부분은 다음과 같은 단계를 처리한다.

1. 조건 검사에 사용할 카운터 값을 초기화한다.
2. 루프를 진행할 것인지 조건을 검사한다.
3. 루프 몸체를 수행한다.
4. 카운터 값을 갱신한다.

for 루프를 구성하는 부분은 괄호로 묶여있다.

```cpp
for(초기화; 조건검사; 갱신)
{
	루프 몸체
}
```

루프 초기화(loop initialization)

- 처음 단 한번만 수행한다.
- 일반적으로 변수에 시작값을 설정한다.
- 루프의 주기를 카운트하는데 변수를 사용한다.

조건 검사(test-expression)

- 일반적으로 두개의 값을 비교하는 관계식
- 루프 몸체를 실행할 것인지 여부를 결정
- 어떠한 표현식도 사용 가능하다.
- bool형으로 변환해 false면 루프 종료, true면 계속 진행한다.

for 루프는 진입 조건(entry-condition) 루프이다.

각 루프 주기에 진입할때 조건검사식이 평가된다.

**표현식과 구문**

C++ 표현식은 값이나, 값과 연산자의 조합이다. C++의 모든 표현식은 하나의 값을 가진다.

표현식에 세미콜론을 붙이면 구문이지만 역은 성립하지 않는다.

**융통성 있는 규칙**

for 구문을 작성할 때 루프 초기화 부분에서 변수 선언이 가능하다. 이것은 표현식이 아니지만 허용하는 규칙이다.

또한 루프초기화 부분에서 선한 변수는 루프가 끝나면 소멸된다.

**증가연산자(++)와 감소연산자(—)**

변수에 접두어로 붙으면 증감연산 이후에 표현식을 평가하고, 접미어로 붙으면 표현식 평가 이후에 증감연산을 처리한다.

접미어 접두어가 상관 없는 경우, 접두어 방식이 약간 더 효율적이다.

접미어는 값의 복사본을 만들고, 값을 증가시키고, 복사본을 리턴하는 방식으로 작동하기 때문이다.

**부수효과와 시퀀스 포인트**

부수효과(side effect) - 수식을 평가할 때 변수에 저장되어있는 값과 같은 것이 변경될 때 일어나는 효과

시퀀스포인트 - 프로그램의 실행이 다음 단계로 넘어가기 전에 모든 부수효과들이 확실하게 평가되는 포인트 C++에서는 세미콜론으로 표시한다.

**증가/감소 연산자와 포인터**

포인터에도 증가/감소 연산자를 사용할 수 있다. 포인터가 지시하는 데이터형의 바이트 수만큼 값을 증가시킨다.

| *++pt | 포인터 증가, 값을 취한다 |
| --- | --- |
| ++*pt | 지시되는 값 증가 |
| (*pt)++ | 지시되는 값 증가 |
| *pt++ | 원래 주소를 참조, 포인터 증가 |

**조합 대입 연산자**

| 연산자 | 효과 (L은 왼쪽 피연산자, R은 오른쪽 피연산자) |
| --- | --- |
| += | L+R을 L에 대입 |
| -= | L-R을 L에 대입 |
| *= | L*R을 L에 대입 |
| /= | L/R을 L에 대입 |
| %= | L%R을 L에 대입 |

**복합 구문 또는 블록**

루프 몸체를 중괄호로 묶는다.

**콤마 연산자**

- 두 개의 표현식을 하나로 결합 가능하다.
- 첫 번째 표현식을 먼저 평가한 후 그다음 표현식을 평가한다.(시퀀스포인트로 사용)
- 두 번째 표현식을 콤마 표현식 전체의 값으로 만든다.

**관계표현식**

| 연산자 | 의미 |
| --- | --- |
| << | 작다 |
| <<= | 작거나 같음 |
| == | 같다 |
| > | 크다 |
| >= | 크거나 같음 |
| != | 같지 않다 |

숫자의 비교에만 사용할 수 있다.

**C 스타일 문자열 비교**

배열 이름은 배열의 주소를 기호로 나타낸 것이다. 큰 따옴표로 묶인 문자열 상수 역시 주소이다.

두 개를 비교한다면 동일한 주소에 저장되어 있는지 검사한다.

strcmp() 함수는 매개변수로 두 개의 문자열 주소를 가진다.

포인터나 문자열 상수, 문자 배열의 이름을 매개변수로 사용 가능하다.

| 0 | 문자열이 같음 |
| --- | --- |
| 양수 | 앞 문자열이 시스템 조회 순서 상 뒤 |
| 음수 | 앞 문자열이 시스템 조회 순서 상 앞 |

시스템 조회 순서 - ASCII코드 같은 문자 코드 상 낮은 코드

문자는 정수로 저장되어있기 때문에, 관계연산자로 비교 가능하다.

**string 클래스 문자열 비교**

string클래스 문자열을 사용하는 것이 훨씬 편리하다. 관계연산자를 허용하기 때문이다.

왼쪽에 string객체가 있다면 오른쪽에는 string 객체 또는 C스타일 문자열 일 수 있다.

---

### 05.2 while 루프

for 루프에서 초기화, 갱신 부분을 없애고 루프 몸체와 조건 검사 부분만 남겨 놓은 것이다.

```cpp
while(조건검사)
{
	루프몸체
}
```

루프를 종료하기 위해 조건 검사에 영향을 주는 것이 루프 몸체에 있어야 한다.

while 루프 또한 진입 조건 루프이다.

**for와 while**

C++에서 사실상 같은 것이다. 몇 가지만 고쳐 쓴다면 같은 역할을 하게 만들 수 있다.

일반적으로는 for 루프를 루프 카운트가 필요할 때 주로 사용한다.

while루프는 얼마만큼 루프를 반복해야할 지 미리 알 수 없을 때 사용한다.

**시간 지연 루프**

ANSI C와 C++ 라이브러리는 이 용도로 사용할 수 있는 clock()함수를 제공한다.

clock()는 프로그램이 실행된 순간부터 이 함수가 호출된 순간까지 경과한 시스템 시간을 리턴함

ctime헤더 파일이 해결책을 제공한다.

CLOCKS_PER_SEC 라는 기호 상수를 정의한다.

clock() 함수가 리턴하는 시스템 시간을 이 상수로 나누면 초 단위의 시간을 얻을 수 있다. 또는 초 단위의 시간에 이 상수를 곱하면 시스템 시간을 얻을 수 있다.

---

### do while 루프

탈출 조건 루프(exit-condition) : 루프 몸체를 먼저 실행 후, 조건을 나중에 검사

조건을 평가하기 전에 루프 몸체를 적어도 한번 실행한다

do while 구문

```cpp
do
{
	루프몸체
} while(조건검사);
```

do

body

while(test-expression);

do while 루프가 적당한 경우 : 사용자로부터 입력을 받아야 할 때는 조건을 검사하기 전 입력부터 받아야 함

---

### 05.4 Range 기반의 for 루프(C++11)

C++11은 Range 기반의 for 루프라고 불리는 새로운 형태가 추가되었다.

이는 배열을 만들고 배열 안에 존재하는 값들을 모두 돌면서 루프 몸체를 실행한다.

---

### 05.5 루프와 텍스트 입력

문자를 읽어들이는 것은 일반적으로 while루프를 사용한다.

**cin을 이용한 입력**

키보드로부터 텍스트를 입력받기 위해 루프를 사용할 경우에, 프로그램은 입력이 언제 끝나는지 알아야 한다. 입력이 언제 끝나는지 아는 한 가지 방법은 표지문자 (센티널 캐릭터) 라고 부르는 특수 문자를 입력 중지 신호로 사용한다.

cin은 화이트 스페이스를 무시하고 건너뛴다. 

버퍼를 사용한다 사용자가 엔터를 누르기 전까지 프로그램에 전달 되지 않는다.

**cin.get(char)를 이용한 입력**

cin.get(char)은 화이트 스페이스까지 모든 문자를 읽어들인다.

**파일 끝(End-Of-File)조건**

- 입력이 파일의 끝에 도달했을 때 이를 인식하게 해주는 방법이다.
- EOF는 입력에 있어서 특정 문자를 나타내는 것이 아니라 더 이상 문자가 없다는 신호이다.

UNIX와 MS-DOS 와 같은 많은 OS들에서 Redirection(리디렉션) 기능을 제공하기 때문에 키보드 입력을 파일로 대체할 수 있다.

많은 OS들이 EOF 조건을 키보드 입력을 통해 시뮬레이션 가능하다.

cin은 **EOF**를 탐지했을 때 두 개의 비트(eofbit와 failbit)를 1로 설정한다.

eof()라는 멤버 함수 사용 시, eofbit가 설정되었는지 알 수 있다.

cin.eof()의 호출은 EOF가 탐지되었으면, bool값 true 리턴, 아니면 false 리턴, eof()나 fail() 메서드는 가장 최근에 읽은 결과를 보고한다.

**cin.get()의 또 다른 버전**

| 특성 | cin.get(ch) | ch=cin.get() |
| --- | --- | --- |
| 입력 문자 전달 방법 | 매개변수 ch에 대입 | 함수의 리턴값을 ch에 대입 |
| 문자가 입력되었을 때의 함수 리턴값 | istream 클래스의 객체
(bool 값으로 변환 후 true) | int 형으로 된 문자 코드 |
| EOF에서의 함수 리턴 값 | istream 클래스의 객체
(bool 값으로 변환 후 false) | EOF |

---

### 05.6 중첩 루프와 2차원 배열

2차원 배열 - 배열의 원소로 배열을 가지는 것

```cpp
자료형 배열명[a][b];
//a개의 원소를 가지는 배열이다.
//a개의 원소들은 b개의 원소를 가지는 배열이다.
```

**2차원 배열의 초기화**

2차원 배열을 만들때 모든 원소를 초기화 할 수 있다.

2차원 배열을 중첩루프를 사용해 열과 행을 사용하는 것처럼 추상화 하면 사용이 편하다.
